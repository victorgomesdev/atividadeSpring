<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Lista de Compras</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <style>
        .container { display: flex; }
        .sidebar { width: 220px; background: #f2f2f2; padding: 1rem; }
        .content { flex: 1; padding: 2rem; }
        .sidebar ul { list-style: none; padding: 0; }
        .sidebar li { margin-bottom: 1rem; }
        .sidebar a { text-decoration: none; color: #333; }
        .sidebar a.active { font-weight: bold; color: #4CAF50; }
    </style>
</head>
<body>
    <div th:replace="fragments/navbar :: navbar"></div>
    <div class="container">
        <aside class="sidebar">
            <h3>Pessoas</h3>
            <ul>
                <li th:each="p : ${pessoas}">
                    <a th:href="@{/compras/{id}(id=${p.id})}" th:text="${p.nome}" th:classappend="${p.id} == ${pessoaSelecionada?.id} ? 'active'"></a>
                </li>
            </ul>
            <a th:href="@{/pessoas/cadastrar}" class="botao">Cadastrar Pessoa</a>
        </aside>
        <main class="content">
            <div th:if="${pessoaSelecionada != null}">
                <h2 th:text="'Produtos de ' + ${pessoaSelecionada.nome}"></h2>
                <ul>
                    <li th:each="prod : ${pessoaSelecionada.produtos}">
                        <span th:text="${prod.nome}"></span> - 
                        <span th:text="${prod.quantidade}"></span> unidades - 
                        <span th:text="${prod.valor}"></span> R$
                    </li>
                </ul>
                <a th:href="@{/produtos/cadastrar/{id}(id=${pessoaSelecionada.id})}" class="botao">Adicionar Produto</a>
            </div>
            <div th:if="${pessoaSelecionada == null}">
                <p>Selecione uma pessoa para ver os produtos.</p>
            </div>
        </main>
    </div>
</body>
</html>